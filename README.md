# [내일배움캠프 사전캠프] Unreal C++로 AI 구성하기.

## 1. 오늘 학습 키워드

>### 블랙보드

>### Behavior Tree

>### Custom Node

## 2. 오늘 학습 한 내용을 나만의 언어로 정리하기

**Unreal Engine의 AI 시스템**에서 중요한 두 가지 요소인 **블랙보드(Blackboard)**와 AI **에셋(Behavior Tree)**가 있다.

이 두 가지는 AI 시스템을 구성하는 핵심적인 역할을 가지고 있다.

**블랙보드**는 **AI의 기억 저장소**로, AI 캐릭터가 목표 위치나 특정 상태와 같은 데이터(변수)를 저장하고 관리하는 역할을 하고 있다.

**Behavior Tree**는 AI의 **의사결정 구조**를 시각적으로 설계할 수 있는 도구로, 블랙보드에 저장된 데이터를 기반으로 AI의 행동패턴을 결정한다.

>### 네비매쉬 바운드 볼륨 생성

Unreal Engine에서 AI가 길을 찾기위한 방법중 하나가 바로 네비게이션 메시라는 땅을 그래프 그리듯 찾아가는 방법이다.

이 방법으로 길을 찾기 위해 해당 땅을 지정하고자 사용하는 것이 **네비매시 바운드 볼륨**으로 해당 영역은 AI가 그래프로 인지 할 수 있는 땅으로 구성된.

>### 블랙보드 생성하기

**블랙보드는 Unreal Behavior Tree에서 사용되는 자료들을 선언해두는 역할을 맡고 있다.**

C++에서 header(.h) 파일에 기본적인 자료형을 선언해서 사용과 유사한 형태로, 필요한 자료형을 설정해둘 수 있다.

- 콘텐츠 브라우저에서 “콘텐츠/AI” 경로상에 우클릭하여 **“인공지능 > 블랙보드”** 를 선택하여 생성한 뒤, “BB_AI”로 파일명을 설정해준다.

- BB_AI 파일을 더블 클릭하여 열어서, 데이터 내용을 확인할 수 있다.

기본으로 생성 된 SelfActor의 경우, AI가 소속 된 Actor를 나타낸다.

- “새 키” 버튼을 클릭하면 새로운 데이터를 추가해줄 수 있다.
- 이번 예시에서는 임의에 이동정보를 저장하는 벡터 자료형을 저장하고 이름(키 이름)을 TargetPosition으로 설정을 해 다른 코드에서 사용할 준비를 했다.

>### Behavior Tree

**Behavior Tree는 AI에 행동패턴을 설정하는 역할을 맡고 있다.** 

블랙보드에 선언된 데이터를 기반으로, 이동 / 공격 / 순찰 등 다양한 행동패턴을 설정하는 자료이다.

**Behavior Tree의 경우,** 단어 의미대로 행동(Behavior)을 나무(Tree) 구조로 작성이 가능한 구조이다.

- 콘텐츠 브라우저에서 “콘텐츠/AI” 경로상에 우클릭하여 **“인공지능 > 비헤이비어 트리”** 를 선택하여 생성한 뒤, “BT_AI”로 파일명을 설정해준다.

- BT_AI 파일을 더블 클릭하여 열여서, 데이터의 내용을 확인할 수 있다.

우측 **Behavior Tree**상에 만들어둔 BB_AI 인지 확인하고, 만약 다른 파일이 들어있다면 변경한다.

- 우클릭을 하여 새로운 노드들을 추가할 수 있다. 이번엔 Behavior Tree에서 대표적으로 많이 사용되는 **Selector**와 **Sequence**에 대해서 공부해 보았다.

1. **Selector** : C++에서 if / if else / else 구조와 유사한 형태입니다.

   코드 구조로 비유하면 다음과 같습니다. 만약 true로 return 되는 값이 있다면,

   해당 node를 진행하고, 아니라면 다음 node가 선택되어 진행합니다.

```cpp
//1번째 선택지
if(n > 5)
{
    return true;
}
//2번째 선택지
else if(n > 3)
{
		return true;
}
//아닌 경우
else
{
		return false;
}

```

Node 구조 예시

- **Sequence** : 연결 된 Node들을 **순서대로 실행**합니다.
- 실행 순서는 Node에 우측 상단을 보면 확인할 수 있습니다.


이 두개의 영역 박스 종류는 Behavior Tree안에서 드래그를 하여 먼저 진행되는 순서를 변경할 수 있다.

>### Custom Node

## 3. 내일 학습 할 것은 무엇인지

남은 UI를 추가하고 적 AI가 자동으로 소환되게 만들어 TPS 게임의 틀을 잡을 예정이다.

#내일배움캠프 #사전캠프 #TIL 
